'use strict';class BunzErrors{retryAttempts=new Map();maxRetries=3;async handle(error,url,target,options={}){console.error('BUNZ Error:',error,url);const targetEl=typeof target==='string' ? document.querySelector(target):target;if(!targetEl)return;const event=new CustomEvent('bunz:error',{detail:{error,url,target},cancelable:true});document.dispatchEvent(event);if(event.defaultPrevented)return;if(options.retry!==false&&this.shouldRetry(url)){return this.retry(url,target,options);}this.showFallback(targetEl,error,url,options);}shouldRetry(url){const attempts=this.retryAttempts.get(url)||0;return attempts<this.maxRetries;}async retry(url,target,options){const attempts=this.retryAttempts.get(url)||0;this.retryAttempts.set(url,attempts+1);await new Promise(r=>setTimeout(r,1000*Math.pow(2,attempts)));if(window.bunz){return window.bunz.load(url,target,options.pushState);}}showFallback(targetEl,error,url,options){const fallback=options.fallback||this.defaultFallback(error,url);targetEl.innerHTML=fallback;targetEl.classList.add('bunz-error');}defaultFallback(error,url){const statusCode=error.message.match(/HTTP(\d+)/)? error.message.match(/HTTP(\d+)/)[1]:'500';return `<div class="panel" style="text-align:center;padding:3rem;"><h2 style="color:var(--danger);margin-bottom:1rem;">‚ö†Ô∏è Failed to Load</h2><p class="text-muted" style="margin-bottom:2rem;">${statusCode==='404' ? 'Page not found':'Something went wrong'}</p><div style="display:flex;gap:1rem;justify-content:center;"><button onclick="window.bunzErrors.retryManual('${url}')" class="btn-primary">üîÑ Retry</button><a href="/" class="btn-secondary">üè† Go Home</a></div></div>`;}async retryManual(url){this.retryAttempts.delete(url);if(window.bunz){await window.bunz.load(url,'#app');}}reset(url){this.retryAttempts.delete(url);}}window.bunzErrors=new BunzErrors();console.log('‚úÖ BUNZ Errors initialized');