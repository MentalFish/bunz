'use strict';class BunzState{preserved=new Map();preserveElements(container){const el=typeof container==='string' ? document.querySelector(container):container;if(!el)return;const toPreserve=el.querySelectorAll('[bz-preserve]');toPreserve.forEach(element=>{const id=element.getAttribute('bz-preserve')||element.id;if(id){this.preserved.set(id,{element:element.cloneNode(true),parent:element.parentElement,state:this.captureState(element)});}});}restoreElements(container){const el=typeof container==='string' ? document.querySelector(container):container;if(!el)return;this.preserved.forEach((data,id)=>{const newElement=el.querySelector(`[bz-preserve="${id}"],#${id}[bz-preserve]`);if(newElement&&data.element){newElement.replaceWith(data.element.cloneNode(true));const restored=el.querySelector(`[bz-preserve="${id}"],#${id}[bz-preserve]`);if(restored){this.restoreState(restored,data.state);}}});this.preserved.clear();}captureState(element){const state={};if(element.tagName==='INPUT'||element.tagName==='TEXTAREA'||element.tagName==='SELECT'){state.value=element.value;if(element.type==='checkbox'||element.type==='radio'){state.checked=element.checked;}}if(element.scrollTop||element.scrollLeft){state.scroll={top:element.scrollTop,left:element.scrollLeft};}const inputs=element.querySelectorAll('input,textarea,select');if(inputs.length>0){state.inputs=Array.from(inputs).map(input=>({name:input.name||input.id,value:input.value,checked:input.checked}));}return state;}restoreState(element,state){if(!state)return;if(state.value!==undefined){element.value=state.value;}if(state.checked!==undefined){element.checked=state.checked;}if(state.scroll){element.scrollTop=state.scroll.top;element.scrollLeft=state.scroll.left;}if(state.inputs){state.inputs.forEach(inputState=>{const input=element.querySelector(`[name="${inputState.name}"],#${inputState.name}`);if(input){input.value=inputState.value;if(inputState.checked!==undefined){input.checked=inputState.checked;}}});}}clear(){this.preserved.clear();}}window.bunzState=new BunzState();console.log('âœ… BUNZ State initialized');