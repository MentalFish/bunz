'use strict';class BunzLifecycle{listeners=new Map();async beforeSwap(target,url){const event=new CustomEvent('bunz:beforeSwap',{detail:{target,url},cancelable:true});document.dispatchEvent(event);if(this.listeners.has(target)){for(const cleanup of this.listeners.get(target)){await cleanup();}this.listeners.delete(target);}return!event.defaultPrevented;}afterSwap(target,url,html){document.dispatchEvent(new CustomEvent('bunz:afterSwap',{detail:{target,url,html}}));}onCleanup(target,fn){const selector=typeof target==='string' ? target:'#app';if(!this.listeners.has(selector)){this.listeners.set(selector,[]);}this.listeners.get(selector).push(fn);}async cleanup(target='#app'){if(this.listeners.has(target)){for(const cleanup of this.listeners.get(target)){await cleanup();}this.listeners.delete(target);}document.dispatchEvent(new CustomEvent('bunz:cleanup',{detail:{target}}));}}window.bunzLifecycle=new BunzLifecycle();console.log('âœ… BUNZ Lifecycle initialized');