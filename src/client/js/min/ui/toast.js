'use strict';class BunzToast{toasts=[];container=null;template=null;templateLoaded=false;constructor(){this.createContainer();this.loadTemplate();}createContainer(){this.container=document.createElement('div');this.container.id='bunz-toast-container';this.container.className='toast-container';document.body.appendChild(this.container);}async loadTemplate(){try{const response=await fetch('/htx/components/toast.htx');const html=await response.text();const temp=document.createElement('div');temp.innerHTML=html;const templateEl=temp.querySelector('.toast');if(templateEl){this.template=templateEl;this.templateLoaded=true;}}catch(error){console.warn('Failed to load toast template,using fallback:',error);this.templateLoaded=false;}}show(options){const{message='',type='info',duration=5000,actions=[],onDismiss=null,persistent=false}=options;const id=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;const icons={info:'â„¹ï¸',success:'âœ…',warning:'âš ï¸',error:'âŒ',cookie:'ðŸª'};const icon=icons[type]||icons.info;let toast;if(this.templateLoaded&&this.template){toast=this.template.cloneNode(true);toast.id=id;toast.className=`toast toast-${type}${persistent ? 'toast-persistent':''}`;const iconEl=toast.querySelector('.toast-icon');const messageEl=toast.querySelector('.toast-message');const actionsEl=toast.querySelector('.toast-actions');const closeBtn=toast.querySelector('.toast-close');if(iconEl)iconEl.textContent=icon;if(messageEl)messageEl.innerHTML=message;if(actions.length>0&&actionsEl){actionsEl.style.display='flex';actionsEl.innerHTML='';actions.forEach((action,idx)=>{const btn=document.createElement('button');btn.className=`toast-btn ${action.primary ? 'toast-btn-primary':'toast-btn-secondary'}`;btn.setAttribute('data-action',idx);btn.textContent=action.label;actionsEl.appendChild(btn);});}if(persistent&&closeBtn){closeBtn.style.display='none';}}else{toast=document.createElement('div');toast.id=id;toast.className=`toast toast-${type}${persistent ? 'toast-persistent':''}`;toast.innerHTML=`<div class="toast-icon">${icon}</div><div class="toast-content"><div class="toast-message">${message}</div>${actions.length>0 ? `<div class="toast-actions"></div>`:''}</div>${!persistent ? '<button class="toast-close" aria-label="Close">&times;</button>':''}`;if(actions.length>0){const actionsEl=toast.querySelector('.toast-actions');actions.forEach((action,idx)=>{const btn=document.createElement('button');btn.className=`toast-btn ${action.primary ? 'toast-btn-primary':'toast-btn-secondary'}`;btn.setAttribute('data-action',idx);btn.textContent=action.label;actionsEl.appendChild(btn);});}}actions.forEach((action,idx)=>{const btn=toast.querySelector(`[data-action="${idx}"]`);if(btn){btn.addEventListener('click',()=>{if(action.callback)action.callback();this.dismiss(id);});}});const closeBtn=toast.querySelector('.toast-close');if(closeBtn){closeBtn.addEventListener('click',()=>this.dismiss(id));}this.container.appendChild(toast);setTimeout(()=>toast.classList.add('toast-show'),10);this.toasts.push({id,element:toast,onDismiss});if(duration>0&&!persistent){setTimeout(()=>this.dismiss(id),duration);}document.dispatchEvent(new CustomEvent('bunz:toast-shown',{detail:{id,type,message}}));return id;}dismiss(id){const toastData=this.toasts.find(t=>t.id===id);if(!toastData)return;const{element,onDismiss}=toastData;element.classList.remove('toast-show');element.classList.add('toast-hide');setTimeout(()=>{element.remove();this.toasts=this.toasts.filter(t=>t.id!==id);if(onDismiss)onDismiss();document.dispatchEvent(new CustomEvent('bunz:toast-dismissed',{detail:{id}}));},300);}dismissAll(){this.toasts.forEach(t=>this.dismiss(t.id));}info(message,duration=5000){return this.show({message,type:'info',duration});}success(message,duration=5000){return this.show({message,type:'success',duration});}warning(message,duration=5000){return this.show({message,type:'warning',duration});}error(message,duration=5000){return this.show({message,type:'error',duration});}}window.bunzToast=new BunzToast();console.log('âœ… BUNZ Toast initialized');